<!DOCTYPE html>
<html lang="th">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width,initial-scale=1" />
Â  <title>Retirement Calculator ğŸ–ï¸</title>
Â  <style>
Â  Â  body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f8fafc; }
Â  Â  .container { max-width: 500px; background: #fff; margin: 40px auto; border-radius: 20px; box-shadow: 0 4px 24px #0001; padding: 28px; }
Â  Â  label { font-weight: 600; margin-bottom: 3px; display: block; }
Â  Â  input, select { padding: 6px 12px; margin-bottom: 10px; border-radius: 8px; border: 1px solid #bbb; width: 100%; }
Â  Â  .row { margin-bottom: 18px; }
Â  Â  button { background: #2563eb; color: #fff; padding: 10px 0; width: 100%; font-size: 1rem; font-weight: bold; border: none; border-radius: 10px; cursor: pointer; margin-top: 8px; }
Â  Â  button:hover { background: #1d4ed8; }
Â  Â  .result { margin-top: 25px; padding: 18px; background: #d1fae5; border-radius: 14px; font-size: 1.2em; text-align: center; }
Â  Â  .small { font-size: 0.9em; color: #666; }
Â  Â  .table-area { margin-top: 28px; background: #fff; padding: 12px; border-radius: 14px; box-shadow: 0 2px 8px #0002; overflow-x: auto;}
Â  Â  table { border-collapse: collapse; width: 100%; }
Â  Â  th, td { padding: 8px 8px; border-bottom: 1px solid #eee; text-align: right; }
Â  Â  th { background: #f1f5f9; color: #1e293b; }
Â  Â  td:first-child, th:first-child { text-align: center; }
Â  Â  .close-btn { float: right; color: #555; cursor: pointer; font-weight: bold; margin-top: -8px;}
Â  Â  .close-btn:hover { color: #dc2626;}
Â  </style>
</head>
<body>
Â  <div class="container">
Â  Â  <h2>à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¡à¸·à¸­à¸„à¸³à¸™à¸§à¸“à¹€à¸‡à¸´à¸™à¹€à¸à¸©à¸µà¸¢à¸“ ğŸ–ï¸</h2>
Â  Â  <div class="row">
Â  Â  Â  <label>à¹€à¸‡à¸´à¸™à¸•à¸±à¹‰à¸‡à¸•à¹‰à¸™à¸•à¸­à¸™à¹€à¸à¸©à¸µà¸¢à¸“</label>
Â  Â  Â  <input type="text" id="initialFund" min="0" required placeholder="à¹€à¸Šà¹ˆà¸™ 5,000,000" oninput="formatNumberInput(this)" />
Â  Â  </div>
Â  Â  <div class="row">
Â  Â  Â  <label>à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¸›à¸µà¹à¸£à¸à¸«à¸¥à¸±à¸‡à¹€à¸à¸©à¸µà¸¢à¸“ (à¸šà¸²à¸—/à¸›à¸µ)</label>
Â  Â  Â  <input type="text" id="firstYearExpense" min="0" required placeholder="à¹€à¸Šà¹ˆà¸™ 300,000" oninput="formatNumberInput(this)" />
Â  Â  </div>
Â  Â  <div class="row">
Â  Â  Â  <label>à¸£à¸°à¸¢à¸°à¹€à¸§à¸¥à¸²à¸«à¸¥à¸±à¸‡à¹€à¸à¸©à¸µà¸¢à¸“à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£ (à¸›à¸µ)</label>
Â  Â  Â  <input type="text" id="afterRetireYears" min="1" required placeholder="à¹€à¸Šà¹ˆà¸™ 25" oninput="formatNumberInput(this, false)" />
Â  Â  </div>
Â  Â  <div class="row">
Â  Â  Â  <label>à¸­à¸±à¸•à¸£à¸²à¸œà¸¥à¸•à¸­à¸šà¹à¸—à¸™à¸•à¹ˆà¸­à¸›à¸µà¸«à¸¥à¸±à¸‡à¹€à¸à¸©à¸µà¸¢à¸“ (%)</label>
Â  Â  Â  <input type="text" id="returnRate" min="0" step="0.01" required placeholder="à¸à¸²à¸à¸›à¸£à¸°à¸ˆà¸³ 1-3% , à¸«à¸¸à¹‰à¸™à¸à¸¹à¹‰ 3-6%" oninput="formatNumberInput(this, false)" />
Â  Â  </div>
Â  Â  <div class="row">
Â  Â  Â  <label>à¸­à¸±à¸•à¸£à¸²à¹€à¸‡à¸´à¸™à¹€à¸Ÿà¹‰à¸­à¸•à¹ˆà¸­à¸›à¸µ (%)</label>
Â  Â  Â  <input type="text" id="inflation" min="0" step="0.01" required placeholder="à¹€à¸Šà¹ˆà¸™ 3" oninput="formatNumberInput(this, false)" />
Â  Â  </div>
Â  Â  <button onclick="calculateRetirementPlan()">à¸„à¸³à¸™à¸§à¸“à¹à¸œà¸™à¹€à¸à¸©à¸µà¸¢à¸“</button>
Â  Â  <div class="result" id="result"></div>
Â  Â  <div class="table-area" id="table-area" style="display:none"></div>
Â  </div>
Â  <script>
Â  Â  function formatNumberInput(el, allowDecimal = true) {
Â  Â  Â  let v = el.value.replace(/,/g, "");
Â  Â  Â  if (!allowDecimal) v = v.replace(/\D/g, '');
Â  Â  Â  else v = v.replace(/[^0-9.]/g, '');

Â  Â  Â  const parts = v.split(".");
Â  Â  Â  if (parts.length > 2) v = parts[0] + '.' + parts[1];

Â  Â  Â  let withComma = v;
Â  Â  Â  if (withComma) {
Â  Â  Â  Â  let [intPart, decPart] = withComma.split(".");
Â  Â  Â  Â  intPart = intPart.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
Â  Â  Â  Â  withComma = decPart ? intPart + "." + decPart : intPart;
Â  Â  Â  }
Â  Â  Â  el.value = withComma;
Â  Â  }

Â  Â  function getInputNumber(id) {
Â  Â  Â  const val = document.getElementById(id).value.replace(/,/g, "");
Â  Â  Â  return Number(val);
Â  Â  }

Â  Â  function calculateRetirementPlan() {
Â  Â  Â  const initialFund = getInputNumber('initialFund');
Â  Â  Â  const firstYearExpense = getInputNumber('firstYearExpense');
Â  Â  Â  const afterRetireYears = getInputNumber('afterRetireYears');
Â  Â  Â  const returnRate = getInputNumber('returnRate') / 100;
Â  Â  Â  const inflation = getInputNumber('inflation') / 100;

Â  Â  Â  if (!initialFund || !firstYearExpense || !afterRetireYears) {
Â  Â  Â  Â  document.getElementById('result').innerHTML = `<span style="color: #dc2626;">à¹‚à¸›à¸£à¸”à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸«à¹‰à¸„à¸£à¸šà¸–à¹‰à¸§à¸™</span>`;
Â  Â  Â  Â  document.getElementById('table-area').style.display = 'none';
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  let currentFund = initialFund;
Â  Â  Â  let annualExpense = firstYearExpense;
Â  Â  Â  let tableHTML = `
Â  Â  Â  Â  <span class="close-btn" onclick="document.getElementById('table-area').style.display='none'">&times;</span>
Â  Â  Â  Â  <b>à¸•à¸²à¸£à¸²à¸‡à¹à¸œà¸™à¹€à¸à¸©à¸µà¸¢à¸“</b>
Â  Â  Â  Â  <table>
Â  Â  Â  Â  Â  <thead>
Â  Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  Â  <th>à¸›à¸µà¸—à¸µà¹ˆ</th>
Â  Â  Â  Â  Â  Â  Â  <th>à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¸£à¸§à¸¡à¸•à¹ˆà¸­à¸›à¸µ<br>(à¸šà¸²à¸—)</th>
Â  Â  Â  Â  Â  Â  Â  <th>à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¹€à¸‰à¸¥à¸µà¹ˆà¸¢à¸•à¹ˆà¸­à¹€à¸”à¸·à¸­à¸™<br>(à¸šà¸²à¸—)</th>
Â  Â  Â  Â  Â  Â  Â  <th>à¹€à¸‡à¸´à¸™à¸„à¸‡à¹€à¸«à¸¥à¸·à¸­à¸›à¸¥à¸²à¸¢à¸›à¸µ<br>(à¸šà¸²à¸—)</th>
Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  </thead>
Â  Â  Â  Â  Â  <tbody>
Â  Â  Â  `;

Â  Â  Â  let foundWarning = false;
Â  Â  Â  for (let i = 1; i <= afterRetireYears; i++) {
Â  Â  Â  Â  // Add return to the fund
Â  Â  Â  Â  currentFund = currentFund * (1 + returnRate);

Â  Â  Â  Â  // Subtract expense
Â  Â  Â  Â  currentFund = currentFund - annualExpense;

Â  Â  Â  Â  const monthlyExpense = annualExpense / 12;

Â  Â  Â  Â  tableHTML += `
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <td>${i}</td>
Â  Â  Â  Â  Â  Â  <td>${annualExpense.toLocaleString(undefined, {maximumFractionDigits: 0})}</td>
Â  Â  Â  Â  Â  Â  <td>${monthlyExpense.toLocaleString(undefined, {maximumFractionDigits: 0})}</td>
Â  Â  Â  Â  Â  Â  <td>${currentFund > 0 ? currentFund.toLocaleString(undefined, {maximumFractionDigits: 0}) : '<span style="color: red;">à¸«à¸¡à¸”</span>'}</td>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  `;

Â  Â  Â  Â  // If fund runs out, stop calculation and show warning
Â  Â  Â  Â  if (currentFund <= 0 && !foundWarning) {
Â  Â  Â  Â  Â  document.getElementById('result').innerHTML = `
Â  Â  Â  Â  Â  Â  <span style="color: #dc2626; font-weight: bold;">à¹€à¸‡à¸´à¸™à¸—à¸¸à¸™à¸‚à¸­à¸‡à¸„à¸¸à¸“à¸ˆà¸°à¸«à¸¡à¸”à¸¥à¸‡à¹ƒà¸™à¸›à¸µà¸—à¸µà¹ˆ ${i}</span>
Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  foundWarning = true;
Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  }

Â  Â  Â  Â  // Increase expense for next year by inflation
Â  Â  Â  Â  annualExpense = annualExpense * (1 + inflation);
Â  Â  Â  }

Â  Â  Â  tableHTML += `</tbody></table>`;
Â  Â  Â  document.getElementById('table-area').innerHTML = tableHTML;
Â  Â  Â  document.getElementById('table-area').style.display = "block";

Â  Â  Â  if (!foundWarning) {
Â  Â  Â  Â  document.getElementById('result').innerHTML = `
Â  Â  Â  Â  Â  <b>à¹€à¸‡à¸´à¸™à¸„à¸‡à¹€à¸«à¸¥à¸·à¸­à¸›à¸¥à¸²à¸¢à¸›à¸µà¸ªà¸¸à¸”à¸—à¹‰à¸²à¸¢:</b><br>
Â  Â  Â  Â  Â  <span style="font-size:2em;color:#059669;">${currentFund.toLocaleString(undefined, {maximumFractionDigits: 0})} à¸šà¸²à¸—</span>
Â  Â  Â  Â  `;
Â  Â  Â  }
Â  Â  }
Â  </script>
</body>
</html>
