<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Running Toolset ‚Äî 3 Pages</title>
  <style>
    :root{
      --bg:#f6f8fb; --card:#ffffff; --text:#1e293b; --muted:#64748b;
      --primary:#2563eb; --primary-700:#1d4ed8; --ring:rgba(37,99,235,.25);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--text);line-height:1.5}
    header{position:sticky;top:0;background:var(--card);border-bottom:1px solid #e9eef6;z-index:10}
    .wrap{max-width:960px;margin-inline:auto;padding:16px}
    .brand{font-weight:800;letter-spacing:.2px}
    nav{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;justify-content:center}
    .nav{appearance:none;border:1px solid #dbe5f3;background:#eef4ff;color:#174ea6;padding:10px 14px;border-radius:999px;font-weight:700;cursor:pointer;transition:.15s}
    .nav[aria-current="page"]{background:var(--primary);border-color:var(--primary);color:#fff;box-shadow:0 0 0 3px var(--ring)}
    .nav:hover{transform:translateY(-1px)}

    main{padding:28px 16px}
    .card{background:var(--card);border:1px solid #e9eef6;border-radius:18px;box-shadow:0 10px 30px rgba(2,6,23,.06);padding:0;}
    .section-inner{max-width:680px;margin:0 auto;padding:24px 20px;text-align:center}
    .header{padding:18px 20px;border-bottom:1px solid #eef2f9;background:linear-gradient(180deg,#fff, #fafcff)}
    h1{font-size:22px;margin:0}
    h2{font-size:18px;margin:16px 0 8px;color:var(--muted)}

    .grid{display:grid;gap:18px}
    .row{display:flex;gap:8px;align-items:center;justify-content:center;flex-wrap:wrap}
    label{font-weight:700;display:block;margin-bottom:8px}

    input[type="number"]{width:110px;max-width:40vw;padding:12px 12px;border:1px solid #dbe5f3;border-radius:12px;font-size:16px;text-align:center;outline:none}
    input[type="number"]:focus{border-color:var(--primary);box-shadow:0 0 0 3px var(--ring)}
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button{opacity:1}

    .btn{appearance:none;border:none;background:var(--primary);color:#fff;border-radius:12px;padding:12px 16px;font-weight:800;cursor:pointer;transition:.15s}
    .btn:hover{background:var(--primary-700)}
    .btn.ghost{background:#eef4ff;color:#174ea6;border:1px solid #dbe5f3}

    .result{margin-top:12px;background:#f3f7ff;border:1px solid #e1eaf8;border-radius:14px;padding:12px;text-align:left}
    .list{display:grid;gap:8px;margin:8px 0 0;padding:0}
    .item{list-style:none;background:#fff;border:1px solid #eef2f9;border-left:4px solid var(--primary);border-radius:12px;padding:10px}

    footer{color:var(--muted);text-align:center;padding:28px 0}
    .hidden{display:none}

    /* Mobile first tweaks */
    @media (max-width:520px){
      .section-inner{padding:18px 14px}
      input[type="number"]{width:96px}
      .btn{width:100%}
      .row>.btn{flex:1}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="brand">üèÉ‚Äç‚ôÇÔ∏è Running Toolset</div>
      <nav aria-label="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì">
        <button class="nav" data-page="p1" aria-current="page">1) Time ¬∑ Pace ¬∑ Distance</button>
        <button class="nav" data-page="p2">2) Race Prediction</button>
        <button class="nav" data-page="p3">3) Training Pace</button>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <!-- Page 1 -->
    <section id="p1" class="card">
      <div class="header"><h1>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Time ¬∑ Pace ¬∑ Distance</h1></div>
      <div class="section-inner grid">
        <div>
          <label>‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á : ‡∏ô‡∏≤‡∏ó‡∏µ : ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</label>
          <div class="row">
            <input type="number" id="p1_timeHours" placeholder="‡∏ä" min="0" inputmode="numeric" value="0">
            <span>:</span>
            <input type="number" id="p1_timeMinutes" placeholder="‡∏ô" min="0" max="59" inputmode="numeric" value="0">
            <span>:</span>
            <input type="number" id="p1_timeSeconds" placeholder="‡∏ß" min="0" max="59" inputmode="numeric" value="0">
          </div>
          <div class="row" style="margin-top:10px">
            <button class="btn" onclick="P1.calculateTime()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì TIME</button>
          </div>
        </div>
        <div>
          <label>Pace (‡∏ô‡∏≤‡∏ó‡∏µ : ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏ï‡πà‡∏≠ ‡∏Å‡∏°.)</label>
          <div class="row">
            <input type="number" id="p1_paceMinutes" placeholder="‡∏ô‡∏≤‡∏ó‡∏µ" min="0" inputmode="numeric" value="0">
            <span>:</span>
            <input type="number" id="p1_paceSeconds" placeholder="‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ" min="0" max="59" inputmode="numeric" value="0">
          </div>
          <div class="row" style="margin-top:10px">
            <button class="btn" onclick="P1.calculatePace()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì PACE</button>
          </div>
        </div>
        <div>
          <label>‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á (‡∏Å‡∏°.)</label>
          <div class="row">
            <input type="number" id="p1_distance" placeholder="‡∏Å‡∏°." min="0" step="0.01" inputmode="decimal" value="0">
          </div>
          <div class="row" style="margin-top:10px">
            <button class="btn" onclick="P1.calculateDistance()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì DISTANCE</button>
            <button class="btn ghost" onclick="P1.calculatePacePercent()">‡∏ï‡∏≤‡∏£‡∏≤‡∏á %PACE</button>
          </div>
        </div>
        <div id="p1_pacePercentResults" class="result"></div>
      </div>
    </section>

    <!-- Page 2 -->
    <section id="p2" class="card hidden">
      <div class="header"><h1>Race Predict Calculator</h1></div>
      <div class="section-inner grid" id="p2_form">
        <div>
          <label>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏î‡πâ ‚Äî ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á (‡∏Å‡∏°.)</label>
          <input type="number" id="p2_achievedDistance" step="any" placeholder="‡πÄ‡∏ä‡πà‡∏ô 5 - 42.195" inputmode="decimal" value="0">
        </div>
        <div>
          <label>‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á : ‡∏ô‡∏≤‡∏ó‡∏µ : ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</label>
          <div class="row">
            <input type="number" id="p2_achievedHours" min="0" placeholder="‡∏ä" inputmode="numeric" value="0">
            <span>:</span>
            <input type="number" id="p2_achievedMinutes" min="0" max="59" placeholder="‡∏ô" inputmode="numeric" value="0">
            <span>:</span>
            <input type="number" id="p2_achievedSeconds" min="0" max="59" placeholder="‡∏ß" inputmode="numeric" value="0">
          </div>
        </div>
        <div>
          <label>‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå (‡∏Å‡∏°.)</label>
          <div class="row">
            <input type="number" id="p2_distance" step="any" placeholder="‡πÄ‡∏ä‡πà‡∏ô 21.0975" inputmode="decimal" value="0">
          </div>
          <div class="row" style="margin-top:10px">
            <button class="btn" onclick="P2.calculateRacePredict()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
          </div>
        </div>
        <div id="p2_result" class="result"></div>
        <div id="p2_standardResults" class="result"></div>
      </div>
    </section>

    <!-- Page 3 -->
    <section id="p3" class="card hidden">
      <div class="header"><h1>Training Pace ‡∏à‡∏≤‡∏Å LT Pace</h1></div>
      <div class="section-inner grid" id="p3_form">
        <div>
          <label>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏î‡πâ ‚Äî ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á (‡∏Å‡∏°.)</label>
          <input type="number" id="p3_achievedDistance" step="any" placeholder="‡πÄ‡∏ä‡πà‡∏ô 5 - 42.195" inputmode="decimal" value="0">
        </div>
        <div>
          <label>‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á : ‡∏ô‡∏≤‡∏ó‡∏µ : ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</label>
          <div class="row">
            <input type="number" id="p3_achievedHours" min="0" placeholder="‡∏ä" inputmode="numeric" value="0">
            <span>:</span>
            <input type="number" id="p3_achievedMinutes" min="0" max="59" placeholder="‡∏ô" inputmode="numeric" value="0">
            <span>:</span>
            <input type="number" id="p3_achievedSeconds" min="0" max="59" placeholder="‡∏ß" inputmode="numeric" value="0">
          </div>
          <div class="row" style="margin-top:10px">
            <button class="btn" onclick="P3.calculateTrainingPaces()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Pace ‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≠‡∏°</button>
          </div>
        </div>
        <div id="p3_result" class="result"></div>
        <div id="p3_training" class="result"></div>
      </div>
    </section>
  </main>

  <footer>
    ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏ô‡∏∏‡∏Å‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πà‡∏á‡∏Ñ‡∏£‡∏±‡∏ö üòÅüèÉ‚Äç‚ôÇÔ∏è
  </footer>

  <script>
    // ---------- NAV ----------
    document.querySelectorAll('.nav').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const id = btn.getAttribute('data-page');
        document.querySelectorAll('main section').forEach(s=>s.classList.toggle('hidden', s.id!==id));
        document.querySelectorAll('.nav').forEach(b=>b.removeAttribute('aria-current'));
        btn.setAttribute('aria-current','page');
        window.scrollTo({top:0, behavior:'smooth'});
      })
    })

    // ---------- Helpers ----------
    const getNum=(id, asFloat=false)=>{
      const v = document.getElementById(id).value.trim();
      if(v===""||v===null) return 0; // ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á = 0
      const n = asFloat? parseFloat(v): parseInt(v,10);
      return Number.isFinite(n)? n: 0; // ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç = 0
    }
    function pad2(n){return String(n).padStart(2,'0')} 
    function formatTimeTH(totalSeconds){
      totalSeconds = Math.round(totalSeconds);
      const h = Math.floor(totalSeconds/3600);
      const m = Math.floor((totalSeconds%3600)/60);
      const s = totalSeconds%60;
      let out = '';
      if(h>0) out += h+" ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ";
      if(m>0 || h>0) out += m+" ‡∏ô‡∏≤‡∏ó‡∏µ ";
      out += s+" ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ";
      return out;
    }
    function formatPace(minPerKm){
      const total = Math.round(minPerKm*60);
      const m = Math.floor(total/60);
      const s = total%60;
      return m+":"+pad2(s);
    }

    // ---------- PAGE 1 ----------
    const P1 = (function(){
      function calculateTime(){
        const paceM = getNum('p1_paceMinutes');
        const paceS = getNum('p1_paceSeconds');
        const dist  = getNum('p1_distance', true);
        if(dist<=0){alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0');return;}
        const paceSec = paceM*60+paceS;
        const total = paceSec*dist;
        const h = Math.floor(total/3600);
        const m = Math.floor((total%3600)/60);
        const s = Math.round(total%60);
        document.getElementById('p1_timeHours').value=h;
        document.getElementById('p1_timeMinutes').value=m;
        document.getElementById('p1_timeSeconds').value=s;
      }
      function calculatePace(){
        const h = getNum('p1_timeHours');
        const m = getNum('p1_timeMinutes');
        const s = getNum('p1_timeSeconds');
        const dist = getNum('p1_distance', true);
        if(dist<=0){alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0');return;}
        const total = h*3600+m*60+s;
        const pace = total/dist;
        const pm = Math.floor(pace/60);
        const ps = Math.round(pace%60);
        document.getElementById('p1_paceMinutes').value=pm;
        document.getElementById('p1_paceSeconds').value=ps;
      }
      function calculateDistance(){
        const h = getNum('p1_timeHours');
        const m = getNum('p1_timeMinutes');
        const s = getNum('p1_timeSeconds');
        const paceM = getNum('p1_paceMinutes');
        const paceS = getNum('p1_paceSeconds');
        const total = h*3600+m*60+s;
        const paceSec = paceM*60+paceS;
        if(paceSec<=0){alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Pace ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô');return;}
        const d = total/paceSec;
        document.getElementById('p1_distance').value = Number.isFinite(d)? d.toFixed(2): 0;
      }
      function calculatePacePercent(){
        const paceM = getNum('p1_paceMinutes');
        const paceS = getNum('p1_paceSeconds');
        const total = paceM*60+paceS;
        if(total<=0){alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Pace (‡∏ô‡∏≤‡∏ó‡∏µ/‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ) ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô');return;}
        const perc = [55,60,65,70,75,80,85,90,95,97,100,105,110,115,120,125];
        let html = '<div class="grid">';
        perc.forEach(p=>{
          const paceSec = total/(p/100);
          const m = Math.floor(paceSec/60);
          const s = Math.round(paceSec%60);
          html += `<div class="item"><strong>${p}%</strong> = ${m}:${pad2(s)} ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏Å‡∏°.</div>`
        })
        html += '</div>';
        document.getElementById('p1_pacePercentResults').innerHTML = html;
      }
      return {calculateTime, calculatePace, calculateDistance, calculatePacePercent};
    })();

    // ---------- Shared LT model (used by p2, p3) ----------
    function adjustedPace(ltTotalSec, percent){ return (ltTotalSec * (100/percent))/60 } // min/km
    function computeRaceTime(targetDistance, ltTotalSec){
      const segments=[
        {duration:2, percent:120},
        {duration:6, percent:110},
        {duration:30, percent:100},
        {duration:120, percent:90},
        {duration:120, percent:80},
        {duration:120, percent:65}
      ];
      let totalMin=0, remain=targetDistance;
      for(const seg of segments){
        const pace = adjustedPace(ltTotalSec, seg.percent);
        const segDist = seg.duration/pace;
        if(segDist < remain){ totalMin += seg.duration; remain -= segDist; }
        else { totalMin += remain*pace; remain=0; break; }
      }
      if(remain>0){ const pace50 = adjustedPace(ltTotalSec,50); totalMin += remain*pace50; }
      return totalMin;
    }
    function findLTPace(achievedDistance, achievedTimeMinutes){
      let low=120, high=600, mid; // sec/km
      for(let i=0;i<32;i++){
        mid=(low+high)/2;
        const t = computeRaceTime(achievedDistance, mid);
        if(t>achievedTimeMinutes) high=mid; else low=mid;
      }
      return mid;
    }

    // ---------- PAGE 2 ----------
    const P2 = (function(){
      function calculateRacePredict(){
        const d = getNum('p2_achievedDistance', true);
        const h = getNum('p2_achievedHours');
        const m = getNum('p2_achievedMinutes');
        const s = getNum('p2_achievedSeconds');
        const target = getNum('p2_distance', true);

        if(!(d>0)){
          document.getElementById('p2_result').innerHTML = '<p style="color:#b00020">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡πÅ‡∏Ç‡πà‡∏á (‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0)</p>';
          document.getElementById('p2_standardResults').innerHTML = '';
          return;
        }
        const timeMin = h*60 + m + s/60;
        const inputPace = d>0 ? timeMin/d : 0; // min/km
        const ltSec = findLTPace(d, timeMin);
        const ltPace = ltSec/60;

        let resultHTML = `<p><strong>Pace ‡∏à‡∏≤‡∏Å‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏î‡πâ:</strong> ${formatPace(inputPace)} ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏Å‡∏°.</p>`+
                         `<p><strong>LT Pace ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ:</strong> ${formatPace(ltPace)} ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏Å‡∏°.</p>`;

        if(target>0){
          const forecastMin = computeRaceTime(target, ltSec);
          const avgPace = target>0 ? forecastMin/target : 0;
          resultHTML += `<p><strong>‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á ${target} ‡∏Å‡∏°. ‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤:</strong> ${formatTimeTH(Math.round(forecastMin*60))} <br>(Pace ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢: ${formatPace(avgPace)} ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏Å‡∏°.)</p>`;
        }
        document.getElementById('p2_result').innerHTML = resultHTML;

        const standards=[
          {label:'5K', distance:5},
          {label:'5M', distance:8.04672},
          {label:'10K', distance:10},
          {label:'10M', distance:16.09344},
          {label:'Half Marathon', distance:21.0975},
          {label:'33K', distance:33},
          {label:'Marathon', distance:42.195}
        ];
        let stdHTML = '<h2>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô</h2><ul class="list">';
        standards.forEach(it=>{
          const t = computeRaceTime(it.distance, ltSec);
          stdHTML += `<li class="item">${it.label} (${it.distance} ‡∏Å‡∏°.) : ${formatTimeTH(Math.round(t*60))} <strong>(${formatPace(t/it.distance)} ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏Å‡∏°.)</strong></li>`
        })
        stdHTML += '</ul>';
        document.getElementById('p2_standardResults').innerHTML = stdHTML;
      }
      return {calculateRacePredict};
    })();

    // ---------- PAGE 3 ----------
    const P3 = (function(){
      function paceRangeStr(ltSec, lowPercent, highPercent){
        const fast = adjustedPace(ltSec, highPercent);
        const slow = adjustedPace(ltSec, lowPercent);
        return `${formatPace(fast)} - ${formatPace(slow)}`;
      }
      function calculateTrainingPaces(){
        const d = getNum('p3_achievedDistance', true);
        const h = getNum('p3_achievedHours');
        const m = getNum('p3_achievedMinutes');
        const s = getNum('p3_achievedSeconds');

        if(!(d>0)){
          document.getElementById('p3_result').innerHTML = '<p style="color:#b00020">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡πÅ‡∏Ç‡πà‡∏á (‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0)</p>';
          document.getElementById('p3_training').innerHTML = '';
          return;
        }
        const timeMin = h*60 + m + s/60;
        const inputPace = d>0 ? timeMin/d : 0;
        const ltSec = findLTPace(d, timeMin);
        const ltPace = ltSec/60;
        document.getElementById('p3_result').innerHTML = `<p><strong>Pace ‡∏à‡∏≤‡∏Å‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô:</strong> ${formatPace(inputPace)} ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏Å‡∏°.</p><p><strong>LT Pace ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ:</strong> ${formatPace(ltPace)} ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏Å‡∏°.</p>`;

        const easyRange = paceRangeStr(ltSec, 70, 85);
        const thRange   = paceRangeStr(ltSec, 95, 103);
        const itvRange  = paceRangeStr(ltSec, 105, 110);

        const html = `
          <h2>‡∏ä‡πà‡∏ß‡∏á Pace ‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≠‡∏°‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h2>
          <ul class="list">
            <li class="item"><strong>Easy Run</strong> ‚Äî ‡∏ß‡∏¥‡πà‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á (60‚Äì120 ‡∏ô‡∏≤‡∏ó‡∏µ) = <strong>${easyRange}</strong> ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏Å‡∏°. <small style="color:var(--muted)">70‚Äì85% LT Pace</small></li>
            <li class="item"><strong>Threshold Run</strong> ‚Äî ‡∏ß‡∏¥‡πà‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á (20‚Äì40 ‡∏ô‡∏≤‡∏ó‡∏µ) = <strong>${thRange}</strong> ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏Å‡∏°. <small style="color:var(--muted)">95‚Äì103% LT Pace</small></li>
            <li class="item"><strong>Interval Run</strong> ‚Äî ‡∏ß‡∏¥‡πà‡∏á (3‚Äì5 ‡∏ô‡∏≤‡∏ó‡∏µ) ‡∏™‡∏•‡∏±‡∏ö‡∏û‡∏±‡∏Å (1‚Äì2 ‡∏ô‡∏≤‡∏ó‡∏µ) √ó 6 ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß = <strong>${itvRange}</strong> ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏Å‡∏°. <small style="color:var(--muted)">105‚Äì110% LT Pace</small></li>
          </ul>`;
        document.getElementById('p3_training').innerHTML = html;
      }
      return {calculateTrainingPaces};
    })();

    // ---------- ENTER to submit (Page 2 & 3) ----------
    function addEnterSubmit(sectionId, cb){
      const el = document.getElementById(sectionId);
      el.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter'){
          e.preventDefault();
          cb();
        }
      });
    }
    addEnterSubmit('p2_form', ()=>P2.calculateRacePredict());
    addEnterSubmit('p3_form', ()=>P3.calculateTrainingPaces());
  </script>
</body>
</html>
